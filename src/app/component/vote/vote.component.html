<app-nav [title]="'رای گیری ترین ها'" >
  <div *ngIf="!isLoaded" class="main">
    <div class="container">
      <div class="row">
        <div class="spinner">
          <div class="cube1"></div>
          <div class="cube2"></div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isLoaded" class="main">
    <div class="container">
      <div class="row">
        <div class="col-10 col-md-10 col-lg-8 offset-1 offset-md-1 offset-lg-2">

          <div *ngFor="let vote of votes" class="row vote-row">
            <div class="col-6">
              <div class="row no-gutters">
                <div class="col-auto">
                  <a *ngIf="!vote.voted_to" class="vote-button" data-toggle="modal" data-target="#exampleModal" (click)="selectedVote = vote">
                    <img src="../../../assets/add.svg" alt="add" />
                  </a>
                  <a *ngIf="vote.voted_to" class="vote-button" (click)="removeVote(vote)">
                    <img src="../../../assets/remove.svg" alt="remove" />
                  </a>
                </div>
                <div class="col-auto">
                  <p *ngIf="vote.voted_to" class="vote-person">{{vote.voted_to.firstname}} {{vote.voted_to.lastname}}</p>
                </div>
              </div>
            </div>
            <div class="col-6">
              <p class="vote-title">{{vote.name}}</p>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <app-usersearch *ngIf="selectedVote"
                  [voteName]="selectedVote.name" (selectedUser)="submitVote($event)">
  </app-usersearch>
</app-nav>

